From 330ab6595e547b97cf6771f99f1b1e7f8380dca7 Mon Sep 17 00:00:00 2001
From: Mateusz Adamski <mateusz.adamski@sky.uk>
Date: Wed, 25 May 2022 15:39:33 -0400
Source: COMCAST
License: Apache-2.0
Upstream-Status: Pending
Subject: [PATCH] Fix JSON Reset
Signed-off-by: Mateusz Adamski <mateusz.adamski@sky.uk>

---
 Source/core/JSON.h | 9 ++-------
 1 file changed, 2 insertions(+), 7 deletions(-)

diff --git a/Source/core/JSON.h b/Source/core/JSON.h
index 39f3f014..8d5d188f 100644
--- a/Source/core/JSON.h
+++ b/Source/core/JSON.h
@@ -3198,13 +3198,7 @@ namespace Core {
 
             void Reset()
             {
-                JSONElementList::const_iterator index = _data.begin();
-
-                // As long as we did not find a set element, continue..
-                while (index != _data.end()) {
-                    index->second->Clear();
-                    index = _data.erase(index);
-                }
+                _data.clear();
             }
 
             void Add(const TCHAR label[], IElement* element)
@@ -4182,6 +4176,7 @@ namespace Core {
             void Clear()
             {
                 Reset();
+                _elements.clear();
             }
             string GetDebugString(int indent = 0) const;
 
-- 
2.17.1

